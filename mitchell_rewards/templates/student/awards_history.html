<!-- mitchell_rewards/templates/student/awards_history.html -->
{% extends 'base.html' %} {% block title %}My Awards - Mitchell Rewards{%
endblock %} {% block content %}
<main
  x-data="studentAwardsHistory"
  class="student_awards_history_main_content p-4 md:p-8"
>
  <h2
    class="student_awards_history_page_title text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center"
  >
    My Awards
  </h2>

  <!-- Custom Message Box Component - Controlled by appMessage Alpine.data -->
  <div
    x-data="appMessage"
    x-show="show"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0 scale-90"
    x-transition:enter-end="opacity-100 scale-100"
    x-transition:leave="transition ease-in duration-300"
    x-transition:leave-start="opacity-100 scale-100"
    x-transition:leave-end="opacity-0 scale-90"
    class="fixed inset-x-0 top-0 left-0 right-0 z-[100] flex justify-center items-start p-4 pointer-events-none"
  >
    <div
      :class="{
            'bg-green-100 border border-green-400 text-green-700': type === 'success',
            'bg-red-100 border border-red-400 text-red-700': type === 'error'
        }"
      class="max-w-md w-full p-4 rounded-lg shadow-lg text-center pointer-events-auto mt-20"
    >
      <span x-text="message"></span>
    </div>
  </div>

  <!-- My Awarded Points Section (Card Layout) -->
  <section>
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
        Points Awarded to Me
      </h3>
      <span class="text-lg font-bold text-gray-900 dark:text-white"
        >Total Awarded: <span x-text="totalAwardedPoints"></span> Points</span
      >
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <template x-for="award in awardedPoints" :key="award.id">
        <div
          class="bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 p-6 flex flex-col justify-between"
        >
          <div>
            <h4
              class="text-xl font-bold text-gray-900 dark:text-white mb-2"
              x-text="award.reason"
            ></h4>
            {# Reason as heading #}
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-1">
              <span class="font-medium">Awarded by:</span>
              <span x-text="award.teacher"></span>
            </p>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-1">
              <span class="font-medium">Category:</span>
              <span x-text="award.category"></span>
            </p>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
              <span class="font-medium">Date:</span>
              <span x-text="award.date"></span>
            </p>
          </div>
          <div
            class="flex justify-start items-center mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"
          >
            <span
              class="text-2xl font-extrabold text-green-700 dark:text-green-500"
              x-text="'+' + award.points"
            ></span>
            {# Green for awarded points, larger font #}
            <span class="text-sm text-gray-600 dark:text-gray-400 ml-2"
              >Points</span
            >
          </div>
        </div>
      </template>
      <template x-if="awardedPoints.length === 0">
        <div
          class="col-span-full text-center text-gray-500 dark:text-gray-400 py-10"
        >
          No points awarded yet. Keep up the great work!
        </div>
      </template>
    </div>
  </section>
</main>
{% endblock %} {% block body_extra %}
<script>
  document.addEventListener("alpine:init", () => {
    Alpine.store("userRoles").currentRole = "student";
    document.getElementById("nav_user_name").innerText = "Student User";
    document.getElementById("nav_user_name_dropdown").innerText =
      "Student User";
    document.getElementById("nav_user_role").innerText = "Student";
  });
</script>
{% endblock %}
